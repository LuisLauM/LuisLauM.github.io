<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-10-21">
<meta name="description" content="What they are and how to access? | ¬øQu√© son y c√≥mo acceder a ellos?">

<title>Introduction to marbec-data and marbec-gpu ‚Äì Beneath the surface üåä</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon-wave.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-d166b450ba5a8e9f7a0ab969bf6592c1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-d89fc942f684c7f97fb3c2cf2bc0f3e1.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-a040cd6abc73b98b2f4c673569425434.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Beneath the surface üåä</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
  <ul>
  <li><a href="#en-introduction-to-marbec-data-and-marbec-gpu" id="toc-en-introduction-to-marbec-data-and-marbec-gpu" class="nav-link active" data-scroll-target="#en-introduction-to-marbec-data-and-marbec-gpu">[EN] Introduction to <code>marbec-data</code> and <code>marbec-gpu</code></a>
  <ul class="collapse">
  <li><a href="#what-are-they-are-they-the-same" id="toc-what-are-they-are-they-the-same" class="nav-link" data-scroll-target="#what-are-they-are-they-the-same">What are they? Are they the same?</a></li>
  <li><a href="#power-of-marbec-gpu" id="toc-power-of-marbec-gpu" class="nav-link" data-scroll-target="#power-of-marbec-gpu">Power of <code>marbec-gpu</code></a></li>
  <li><a href="#how-to-access-marbec-data" id="toc-how-to-access-marbec-data" class="nav-link" data-scroll-target="#how-to-access-marbec-data">How to access marbec-data?</a></li>
  <li><a href="#how-to-change-our-password-in-marbec-data" id="toc-how-to-change-our-password-in-marbec-data" class="nav-link" data-scroll-target="#how-to-change-our-password-in-marbec-data">¬øHow to change our password in <code>marbec-data</code>?</a></li>
  <li><a href="#check-our-available-space-in-marbec-data." id="toc-check-our-available-space-in-marbec-data." class="nav-link" data-scroll-target="#check-our-available-space-in-marbec-data.">Check our available space in <code>marbec-data</code>.</a></li>
  <li><a href="#how-to-manage-files-inside-marbec-data-or-between-marbec-data-and-our-pc" id="toc-how-to-manage-files-inside-marbec-data-or-between-marbec-data-and-our-pc" class="nav-link" data-scroll-target="#how-to-manage-files-inside-marbec-data-or-between-marbec-data-and-our-pc">How to manage files inside <code>marbec-data</code> or between <code>marbec-data</code> and our PC?</a></li>
  <li><a href="#how-to-access-marbec-gpu" id="toc-how-to-access-marbec-gpu" class="nav-link" data-scroll-target="#how-to-access-marbec-gpu">How to access <code>marbec-gpu</code>?</a></li>
  <li><a href="#change-password-in-marbec-gpu." id="toc-change-password-in-marbec-gpu." class="nav-link" data-scroll-target="#change-password-in-marbec-gpu.">Change password in <code>marbec-gpu</code>.</a></li>
  <li><a href="#how-to-run-a-process-on-marbec-gpu" id="toc-how-to-run-a-process-on-marbec-gpu" class="nav-link" data-scroll-target="#how-to-run-a-process-on-marbec-gpu">How to run a process on <code>marbec-gpu</code>?</a></li>
  </ul></li>
  <li><a href="#es-introducci√≥n-a-marbec-data-y-marbec-gpu" id="toc-es-introducci√≥n-a-marbec-data-y-marbec-gpu" class="nav-link" data-scroll-target="#es-introducci√≥n-a-marbec-data-y-marbec-gpu">[ES] Introducci√≥n a <code>marbec-data</code> y <code>marbec-gpu</code></a>
  <ul class="collapse">
  <li><a href="#qu√©-son-son-lo-mismo" id="toc-qu√©-son-son-lo-mismo" class="nav-link" data-scroll-target="#qu√©-son-son-lo-mismo">¬øQu√© son? ¬øSon lo mismo?</a></li>
  <li><a href="#potencia-de-marbec-gpu" id="toc-potencia-de-marbec-gpu" class="nav-link" data-scroll-target="#potencia-de-marbec-gpu">Potencia de <code>marbec-gpu</code></a></li>
  <li><a href="#c√≥mo-acceder-a-marbec-data" id="toc-c√≥mo-acceder-a-marbec-data" class="nav-link" data-scroll-target="#c√≥mo-acceder-a-marbec-data">¬øC√≥mo acceder a <code>marbec-data</code>?</a></li>
  <li><a href="#c√≥mo-cambiar-nuestra-contrase√±a-de-marbec-data" id="toc-c√≥mo-cambiar-nuestra-contrase√±a-de-marbec-data" class="nav-link" data-scroll-target="#c√≥mo-cambiar-nuestra-contrase√±a-de-marbec-data">¬øC√≥mo cambiar nuestra contrase√±a de <code>marbec-data</code>?</a></li>
  <li><a href="#verificar-el-espacio-disponible-en-marbec-data" id="toc-verificar-el-espacio-disponible-en-marbec-data" class="nav-link" data-scroll-target="#verificar-el-espacio-disponible-en-marbec-data">Verificar el espacio disponible en <code>marbec-data</code></a></li>
  <li><a href="#c√≥mo-manejar-archivos-dentro-de-marbec-data-o-entre-marbec-data-y-nuestra-pc" id="toc-c√≥mo-manejar-archivos-dentro-de-marbec-data-o-entre-marbec-data-y-nuestra-pc" class="nav-link" data-scroll-target="#c√≥mo-manejar-archivos-dentro-de-marbec-data-o-entre-marbec-data-y-nuestra-pc">¬øC√≥mo manejar archivos dentro de <code>marbec-data</code> o entre <code>marbec-data</code> y nuestra PC?</a></li>
  <li><a href="#c√≥mo-acceder-a-marbec-gpu" id="toc-c√≥mo-acceder-a-marbec-gpu" class="nav-link" data-scroll-target="#c√≥mo-acceder-a-marbec-gpu">¬øC√≥mo acceder a <code>marbec-gpu</code>?</a></li>
  <li><a href="#cambiar-contrase√±a-en-marbec-gpu" id="toc-cambiar-contrase√±a-en-marbec-gpu" class="nav-link" data-scroll-target="#cambiar-contrase√±a-en-marbec-gpu">Cambiar contrase√±a en <code>marbec-gpu</code></a></li>
  <li><a href="#c√≥mo-ejecutar-un-proceso-en-marbec-gpu" id="toc-c√≥mo-ejecutar-un-proceso-en-marbec-gpu" class="nav-link" data-scroll-target="#c√≥mo-ejecutar-un-proceso-en-marbec-gpu">¬øC√≥mo ejecutar un proceso en <code>marbec-gpu</code>?</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<div class="quarto-about-marquee">
  <div class="about-image-container">
    <img src="banner.jpg" class="about-image
  rectangle " style="width: 100%;">
  </div>
  <div class="about-contents">
    <header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction to <code>marbec-data</code> and <code>marbec-gpu</code></h1>
</div>
<div>
  <div class="description">
    <p>What they are and how to access? | ¬øQu√© son y c√≥mo acceder a ellos?</p>
  </div>
</div>
<div class="quarto-title-meta">
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 21, 2024</p>
    </div>
  </div>
  </div>
</header> <main class="content" id="quarto-document-content">

<p>Image credits: Diego Fernandez at <a href="https://unsplash.com/photos/mixing-console-yRNJAcdpDAo?utm_content=creditShareLink&amp;utm_medium=referral&amp;utm_source=unsplash">Unplash</a></p>
<section id="en-introduction-to-marbec-data-and-marbec-gpu" class="level1">
<h1>[EN] Introduction to <code>marbec-data</code> and <code>marbec-gpu</code></h1>
<section id="what-are-they-are-they-the-same" class="level2">
<h2 data-anchor-id="what-are-they-are-they-the-same">What are they? Are they the same?</h2>
<p>No.&nbsp;<code>marbec-data</code> and <code>marbec-gpu</code> compose a <em>High-performance computing system</em>. (Very) Basically, it is like having a supercomputer prepared to deal with complex problems. Imagine that, instead of having a single processor (Intel/AMD) working in conjunction with the RAM and storage space of just your computer (e.g.&nbsp;your laptop), you have several computers linked together combining their power to run complex processes. This is how HPC works: it uses multiple computers working together to solve very large computations much faster than a single personal computer could. Marbec HPC is composed of two systems: <code>marbec-data</code> (a Network File System or NFS) and <code>marbec-gpu</code> (a compute cluster).</p>
<p><strong>An NFS</strong> is a network protocol that allows multiple devices connected to a network to share files and directories. This allows researchers to store input data, codes and results, but with the advantage of having a centralized backup and the ability to access their files from any machine connected to the cluster. In very simple words and going back to the analogy with your current PC, <code>marbec-data</code> takes the place of the storage (i.e.&nbsp;the hard disk) in the HPC. On the other hand, a <strong>compute cluster</strong> is, in essence, a set of interconnected computational elements working in a coordinated manner to execute complex computational processes. Within the analogy of your current PC, <code>marbec-gpu</code> equates to: your main processor (CPU), your graphics processor (GPU), general RAM and video RAM. Of course, with these simplifications we are leaving out some important details that we will explain in depth as we need to.</p>
</section>
<section id="power-of-marbec-gpu" class="level2">
<h2 data-anchor-id="power-of-marbec-gpu">Power of <code>marbec-gpu</code></h2>
<p>Up to October 2024, <code>marbec-gpu</code> has:</p>
<ul>
<li>CPU: 4 x <span class="citation" data-cites="2.30GHz">[Intel(R) Xeon(R) Platinum 8380 @2.30GHz, 40 physical cores, 80 logical cores]</span></li>
<li>RAM: 1.5 TB DDR4</li>
<li>GPU: 2 x [NVIDIA A40, 48 GB ECC GDDR6 RAM, 10‚Äô752 CUDA cores, 336 tensor cores, 696 GB/s bandwidth]</li>
</ul>
</section>
<section id="how-to-access-marbec-data" class="level2">
<h2 data-anchor-id="how-to-access-marbec-data">How to access marbec-data?</h2>
<p>This will depend on what we need to do. If we just want to take a quick look at the files and review aspects of our account, we just open a browser window and go to the address <a href="https://marbec-data.ird.fr/" class="uri">https://marbec-data.ird.fr/</a>. This will open a login interface where we just need to enter our credentials (provided by the <code>marbec-gpu</code> administrators).</p>
<p><img src="images/clipboard-380148957.png" class="img-fluid"></p>
<p>Once inside, we will see a sort of desktop where we will see a couple of icons to access our shared directories and general documentation on the use of the platform.</p>
<p><img src="images/clipboard-3953217027.png" class="img-fluid"></p>
</section>
<section id="how-to-change-our-password-in-marbec-data" class="level2">
<h2 data-anchor-id="how-to-change-our-password-in-marbec-data">¬øHow to change our password in <code>marbec-data</code>?</h2>
<p>We will start by clicking on the user options icon (the one that looks like a little person) at the top right of the desktop and selecting the <strong>Personal</strong> option.</p>
<p><img src="images/clipboard-1332799177.png" class="img-fluid"></p>
<p>A small window will open where in the first tab shown (<strong>Account</strong>), we will have access to <strong>Change password</strong> option. Likewise, in the <strong>Display Preferences</strong> tab, we will be able to change aspects such as the interface language or the desktop image and colors.</p>
<p><img src="images/clipboard-222437051.png" class="img-fluid"></p>
</section>
<section id="check-our-available-space-in-marbec-data." class="level2">
<h2 data-anchor-id="check-our-available-space-in-marbec-data.">Check our available space in <code>marbec-data</code>.</h2>
<p>From the same <strong>Personal</strong> window seen in the previous section, in the <strong>Quota</strong> tab we will be able to verify the storage limit assigned to our user and what has been used so far in each of the folders associated to our user. This is a simple and graphic way to visualize the available space we have left. If at any time we need more space, just request it by e-mail to the <code>marbec-data</code> administrators.</p>
<p><img src="images/clipboard-2171152553.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>If at any time during the execution of a process the allocated quota limit is reached, the system will block any attempt to save files and this will result in the unplanned termination of the process or errors related to disk write problems.</p>
</div>
</div>
</section>
<section id="how-to-manage-files-inside-marbec-data-or-between-marbec-data-and-our-pc" class="level2">
<h2 data-anchor-id="how-to-manage-files-inside-marbec-data-or-between-marbec-data-and-our-pc">How to manage files inside <code>marbec-data</code> or between <code>marbec-data</code> and our PC?</h2>
<p>We have a <a href="https://luislaum.github.io/blog/marbec-data-manage-files/marbec-data-manage-files.html">post</a> where we develop this point in more detail.</p>
</section>
<section id="how-to-access-marbec-gpu" class="level2">
<h2 data-anchor-id="how-to-access-marbec-gpu">How to access <code>marbec-gpu</code>?</h2>
<p>The easiest way to access <code>marbec-gpu</code> is through a browser using the JupyterLab environment. To do this, just open a browser (Chrome, Firefox, Brave, etc.) window and go to <a href="https://marbec-gpu.ird.fr/" class="uri">https://marbec-gpu.ird.fr/</a>. A window will appear to enter our credentials (NOTE: They are not necessarily the same as those of <code>marbec-data</code>) and then click on the <strong>Start my server</strong> button. Next, a drop-down menu will appear where we will be able to choose different default configurations of computing power for our session.</p>
<p><img src="images/clipboard-1569546190.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Although we indicated a moment ago that marbec-gpu has a good amount of CPUs, GPUs and RAM, this represents 100% of its absolute power and <code>marbec-gpu</code> is a shared service, so it is not possible (allowed) for a single user to monopolize 100% of its capacity. That is why the first choice will consist of deciding what is the power we require for our process. For example, if we want to run an automated process of downloading satellite information, it will be enough to reserve 1 CPU and 2GB of RAM. On the other hand, if our script is only configured (and tested) to use CPU cores, it will not be necessary to reserve those configurations that include GPU. Remember that if you select a very powerful option that you will not take advantage of, it will not be available for someone else who might really need it (choose wisely).</p>
</div>
</div>
<p>After selecting (and reserving) the resources for our session and clicking <strong>Start</strong>, a window with the JupyterLab Launcher will appear. In it, we will be able to see the different preinstalled and available applications. The main one will be the <strong>Terminal</strong>, which is the one we will use to launch (execute) our processes (scripts).</p>
<p><img src="images/clipboard-1563571514.png" class="img-fluid"></p>
</section>
<section id="change-password-in-marbec-gpu." class="level2">
<h2 data-anchor-id="change-password-in-marbec-gpu.">Change password in <code>marbec-gpu</code>.</h2>
<p>From the previous step, we will start by opening a <strong>Terminal</strong> window (by clicking on the corresponding icon) and the window that opens we will type the command <code>passwd</code> (and then <em>Enter</em>). Next, we will be prompted to type our current and new passwords. <strong>By default and for security, during the password change process NO cursor is displayed while typing, so it may appear that our keyboard is not working, but this is not the case. You type normally</strong>.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is very important to define strong passwords (alphanumeric with symbols and uppercase-case) and preferably different passwords for the login in <code>marbec-data</code> and <code>marbec-gpu</code>. On the other hand, the JupyterLab environment DOES allow the use of classic shortcuts like <code>Ctrl+C</code>-<code>Ctrl+V</code> (or <code>Cmd+C</code>-<code>Cmd+V</code> in MacOS) to copy-paste character strings, so it is possible to use them during the password change process with the <code>passwd</code> command.</p>
</div>
</div>
</section>
<section id="how-to-run-a-process-on-marbec-gpu" class="level2">
<h2 data-anchor-id="how-to-run-a-process-on-marbec-gpu">How to run a process on <code>marbec-gpu</code>?</h2>
<p>We have a <a href="https://luislaum.github.io/blog/marbec-gpu-run-process/marbec-gpu-run-process.html">post</a> where we develop this point in more detail.</p>
</section>
</section>
<section id="es-introducci√≥n-a-marbec-data-y-marbec-gpu" class="level1">
<h1>[ES] Introducci√≥n a <code>marbec-data</code> y <code>marbec-gpu</code></h1>
<section id="qu√©-son-son-lo-mismo" class="level2">
<h2 data-anchor-id="qu√©-son-son-lo-mismo">¬øQu√© son? ¬øSon lo mismo?</h2>
<p>No.&nbsp;<code>marbec-data</code> y <code>marbec-gpu</code> componen un Sistema de c√≥mputo de alto rendimiento (<em>High-performance computing</em>). (Muy) B√°sicamente, es como tener una supercomputadora a tu disposici√≥n para resolver problemas complejos. Imagina que, en lugar de tener un √∫nico procesador (Intel/AMD) trabajando en conjunto con la RAM y el espacio de almacenamiento de √∫nicamente tu computadora (e.g.&nbsp;tu laptop), tienes a varias computadoras unidas entre s√≠ combinando su potencia para ejecutar procesos complejos. As√≠ es como funciona un HPC: utiliza m√∫ltiples computadoras trabajando juntas para resolver c√°lculos muy grandes mucho m√°s r√°pido de lo que una sola computadora personal podr√≠a hacerlo. El HPC de Marbec se compone de dos sistemas: <code>marbec-data</code> (un sistema de almacenamiento distribuido o NFS por las siglas en ingl√©s de <em>Network File System</em>) y <code>marbec-gpu</code>(un cl√∫ster de c√≥mputo).</p>
<p><strong>Un NFS</strong> es un protocolo de red que permite a m√∫ltiples dispositivos conectados a una red compartir archivos y directorios. Esto permite a los investigadores el almacenamiento de los datos de entrada, c√≥digos y resultados, pero con la ventaja de tener una copia de seguridad centralizada y la posibilidad de acceder a sus archivos desde cualquier m√°quina conectada al cl√∫ster. En palabras muy simples y volviendo a la analog√≠a con tu actual PC, <code>marbec-data</code> hace las veces del almacenamiento (i.e.&nbsp;del disco duro) en el HPC. Por otro lado, un <strong>cl√∫ster de c√≥mputo</strong> es, en esencia, un conjunto de elementos de c√≥mputo interconectados que trabajan de forma coordinada para ejecutar procesos computacionales complejos. Dentro de la analog√≠a de tu PC actual, <code>marbec-gpu</code> equivale a: tu procesador principal (CPU), tu procesador de gr√°ficos (GPU), la RAM general y la de v√≠deo. Por supuesto, con estas simplificaciones estamos obviando algunos detalles importantes que iremos explicando a profundidad conforme lo necesitemos.</p>
</section>
<section id="potencia-de-marbec-gpu" class="level2">
<h2 data-anchor-id="potencia-de-marbec-gpu">Potencia de <code>marbec-gpu</code></h2>
<p>A octubre 2024, <code>marbec-gpu</code> cuenta con:</p>
<ul>
<li>CPU: 4 x <span class="citation" data-cites="2.30GHz">[Intel(R) Xeon(R) Platinum 8380 @2.30GHz, 40 physical cores, 80 logical cores]</span></li>
<li>RAM: 1.5 TB DDR4</li>
<li>GPU: 2 x [NVIDIA A40, 48 GB ECC GDDR6 RAM, 10‚Äô752 CUDA cores, 336 tensor cores, 696 GB/s bandwidth]</li>
</ul>
</section>
<section id="c√≥mo-acceder-a-marbec-data" class="level2">
<h2 data-anchor-id="c√≥mo-acceder-a-marbec-data">¬øC√≥mo acceder a <code>marbec-data</code>?</h2>
<p>Esto depender√° de lo que necesitemos hacer. Si √∫nicamente queremos echar un vistazo r√°pido a los archivos y revisar aspectos de nuestra cuenta, bastar√° con abrir una ventana de navegador e ir a la direcci√≥n <a href="https://marbec-data.ird.fr/" class="uri">https://marbec-data.ird.fr/</a>. Se abrir√° una interfaz de logueo en donde bastar√° con colocar nuestras credenciales de acceso (brindadas por los administradores de <code>marbec-gpu</code>).</p>
<p><img src="images/clipboard-380148957.png" class="img-fluid"></p>
<p>Una vez adentro, veremos una interfaz similar a un escritorio en donde se mostrar√° un par de √≠conos de acceso a nuestros directorios compartidos y a documentaci√≥n general de uso de la plataforma.</p>
<p><img src="images/clipboard-3953217027.png" class="img-fluid"></p>
</section>
<section id="c√≥mo-cambiar-nuestra-contrase√±a-de-marbec-data" class="level2">
<h2 data-anchor-id="c√≥mo-cambiar-nuestra-contrase√±a-de-marbec-data">¬øC√≥mo cambiar nuestra contrase√±a de <code>marbec-data</code>?</h2>
<p>Empezaremos con un click sobre el √≠cono de opciones de usuario (el que parece una personita que se halla arriba a la derecha) y seleccionaremos la opci√≥n <strong>Personal</strong>.</p>
<p><img src="images/clipboard-1332799177.png" class="img-fluid"></p>
<p>Se abrir√° una peque√±a ventana en donde en la primera pesta√±a mostrada (<strong>Account</strong>), tendremos acceso a cambiar nuestra contrase√±a (<strong>Change password</strong>). As√≠ mismo, en la pesta√±a <strong>Display Preferences</strong>, podremos cambiar aspectos como el idioma de la interfaz o la imagen de escritorio y los colores.</p>
<p><img src="images/clipboard-222437051.png" class="img-fluid"></p>
</section>
<section id="verificar-el-espacio-disponible-en-marbec-data" class="level2">
<h2 data-anchor-id="verificar-el-espacio-disponible-en-marbec-data">Verificar el espacio disponible en <code>marbec-data</code></h2>
<p>Desde la misma ventana de <strong>Personal</strong> vista en la secci√≥n anterior, en la pesta√±a <strong>Quota</strong> podremos verificar el l√≠mite de almacenamiento asignado a nuestro usuario y lo utilizado hasta el momento en cada una de las carpetas asociadas a nuestro usuario. Esta es una manera sencilla y gr√°fica de visualizar el espacio disponible que nos queda. Si en alg√∫n momento necesitamos de m√°s espacio, basta con solicitarlo por e-mail a los administradores de <code>marbec-data</code>.</p>
<p><img src="images/clipboard-2171152553.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si en alg√∫n momento durante la ejecuci√≥n de un proceso se alcanza el l√≠mite de la cuota asignada, el sistema bloquear√° cualquier intento de guardado de archivos y esto dar√° lugar a la finalizaci√≥n imprevista del proceso o a errores relacionados a problemas de escritura en disco.</p>
</div>
</div>
</section>
<section id="c√≥mo-manejar-archivos-dentro-de-marbec-data-o-entre-marbec-data-y-nuestra-pc" class="level2">
<h2 data-anchor-id="c√≥mo-manejar-archivos-dentro-de-marbec-data-o-entre-marbec-data-y-nuestra-pc">¬øC√≥mo manejar archivos dentro de <code>marbec-data</code> o entre <code>marbec-data</code> y nuestra PC?</h2>
<p>Tenemos un <a href="https://luislaum.github.io/blog/marbec-data-manage-files/marbec-data-manage-files.html">post</a> en donde desarrollamos m√°s a detalle este punto.</p>
</section>
<section id="c√≥mo-acceder-a-marbec-gpu" class="level2">
<h2 data-anchor-id="c√≥mo-acceder-a-marbec-gpu">¬øC√≥mo acceder a <code>marbec-gpu</code>?</h2>
<p>La manera m√°s sencilla de acceder a <code>marbec-gpu</code> es a trav√©s de un navegador utilizando el entorno de JupyterLab. Para esto, bastar√° con abrir una ventana de navegador (Chrome, Firefox, Brave, etc.) e ir a la direcci√≥n <a href="https://marbec-gpu.ird.fr/" class="uri">https://marbec-gpu.ird.fr/</a>. Se mostrar√° una ventana para ingresar nuestras credenciales (<strong>OJO: No necesariamente son las mismas que las de <code>marbec-data</code></strong>) y posteriormente daremos click al bot√≥n de <strong>Start my server</strong>. A continuaci√≥n, se mostrar√° un men√∫ desplegable en donde podremos elegir diferentes configuraciones predeterminadas de potencia de c√°lculo para nuestra sesi√≥n.</p>
<p><img src="images/clipboard-1569546190.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si bien, hace un momento indicamos que <code>marbec-gpu</code> dispone de una buena cantidad CPUs, GPUs y RAM, eso representa el 100% de su potencia absoluta y <code>marbec-gpu</code> es un servicio compartido, por lo que no es posible (permitido) que un solo usuario pueda acaparar el 100% de su capacidad. Es por ello que la primera elecci√≥n consistir√° en decidir cu√°l es la potencia que requerimos para nuestro proceso. Por ejemplo, si lo que deseamos es ejecutar un proceso de automatizado de descarga de informaci√≥n satelital, bastar√° con reservar 1 CPU y 2GB de RAM. De otro modo, si nuestro script solo est√° configurado (y probado) para utilizar n√∫cleos de CPU, no es necesario reservar aquellas configuraciones que incluyan GPUs. Recuerda que si seleccionas una opci√≥n muy potente que no aprovechar√°s, no estar√° disponible para alguien m√°s que s√≠ podr√≠a necesitarla realmente (elige sabiamente).</p>
</div>
</div>
<p>Luego de haber seleccionado (y reservado) los recursos para nuestra sesi√≥n y haberle dado click a <strong>Start</strong>, se nos mostrar√° una ventana con el Launcher de JupyterLab. En ella, podremos observar los distintos aplicativos preinstalados y disponibles. El principal de todos ser√° el de <strong>Terminal</strong>, que es con el que lanzaremos (ejecutaremos) nuestros procesos (scripts).</p>
<p><img src="images/clipboard-1563571514.png" class="img-fluid"></p>
</section>
<section id="cambiar-contrase√±a-en-marbec-gpu" class="level2">
<h2 data-anchor-id="cambiar-contrase√±a-en-marbec-gpu">Cambiar contrase√±a en <code>marbec-gpu</code></h2>
<p>A partir del paso anterior, empezaremos por abrir una ventana de <strong>Terminal</strong> (d√°ndole click al √≠cono correspondiente) y la ventana que se abre escribiremos el comando <code>passwd</code> (y luego <em>Enter</em>). A continuaci√≥n, nos solicitar√° que escribamos nuestra contrase√±a actual y la nueva. <strong>OJO: por defecto y por seguridad, durante el proceso de cambio de contrase√±a NO se muestra ning√∫n cursor mientras se escribe, por lo que podr√≠a parecer que nuestro teclado no est√° funcionando, pero esto no es as√≠. Usted escriba con normalidad.</strong></p>
<p><img src="images/clipboard-1563571515.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Es muy importante que se defina contrase√±as seguras (alfanum√©ricas con s√≠mbolos y may√∫sculas-min√∫sculas) y de preferencia distintas para el inicio de sesi√≥n en <code>marbec-data</code> y <code>marbec-gpu</code>. Por otro lado, el entorno de JupyterLab S√ç permite el uso de shortcuts cl√°sicos como <code>Ctrl+C</code>-<code>Ctrl+V</code> (o <code>Cmd+C</code>-<code>Cmd+V</code> en MacOS) para copiar-pegar cadenas de carcateres, por lo que es posible utilizarlos durante el proceso de cambio de contrase√±a con el comando <code>passwd</code>.</p>
</div>
</div>
</section>
<section id="c√≥mo-ejecutar-un-proceso-en-marbec-gpu" class="level2">
<h2 data-anchor-id="c√≥mo-ejecutar-un-proceso-en-marbec-gpu">¬øC√≥mo ejecutar un proceso en <code>marbec-gpu</code>?</h2>
<p>Tenemos un <a href="https://luislaum.github.io/blog/marbec-gpu-run-process/marbec-gpu-run-process.html">post</a> en donde desarrollamos m√°s a detalle este punto.</p>


</section>
</section>
</main> 
  </div>
</div>
 <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/luislaum\.github\.io\/home\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>¬© Copyright 2024, Wencheng Lau-Medrano</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This website is built with <a href="https://github.com/LuisLauM/LuisLauM.github.io" target="_blank"><i class="fa-brands fa-github" title="GitHub octocat logo" aria-hidden="true"></i></a>, <a href="https://www.r-project.org/about.html" target="_blank"><i class="fa-brands fa-r-project" title="R Project" aria-hidden="true"></i></a> and <a href="https://quarto.org/" target="_blank">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>